{% extends "base.html" %}
{% load static %}

{% block title %}Leadership{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-gradient-to-br from-amma-gray-light to-amma-gray py-16 md:py-20">
    <div class="container mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-secondary font-bold text-white mb-4">Leadership Team</h1>
        <p class="text-xl text-white/80 mb-8">Meet the dedicated leaders serving our community with integrity and commitment</p>
    </div>
</section>

<!-- Main Content Section -->
<section class="py-12 bg-amma-white">
    <div class="container mx-auto">

        <!-- Mobile Filter Button -->
        <div class="lg:hidden mb-6">
            <button
                onclick="toggleFilterDrawer()"
                class="w-full bg-amma-gold hover:bg-amma-gold-dark text-amma-black font-semibold py-3 px-6 rounded-amma transition-colors flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                </svg>
                Filter by Department
            </button>
        </div>

        <!-- 2-Column Layout: Main Content + Sidebar -->
        <div class="grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-8">

            <!-- LEFT: Main Leadership Area -->
            <div class="order-2 lg:order-1">

                <!-- Leadership Section -->
                {% if leadership %}
                <div class="mb-16">
                    <div class="relative mb-8">
                        <div class="absolute inset-0 flex items-center" aria-hidden="true">
                            <div class="w-full border-t-2 border-amma-gold"></div>
                        </div>
                        <div class="relative flex justify-center">
                            <span class="bg-amma-white px-6 py-2 text-3xl font-secondary font-bold text-amma-black">
                                Executive Leadership
                            </span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {% for leader in leadership %}
                        <div class="bg-white rounded-amma shadow-amma-light hover:shadow-amma-dark transition-all duration-300 transform hover:-translate-y-1 overflow-hidden group cursor-pointer"
                             onclick="openBioModal('{{ leader.pk }}')">
                            <!-- Photo -->
                            <div class="relative overflow-hidden bg-gradient-to-br from-amma-gold-light to-amma-white">
                                <div class="w-full aspect-square flex items-center justify-center p-8">
                                    {% if leader.photo and leader.photo.url %}
                                    <div class="w-full h-full rounded-full overflow-hidden border-4 border-white shadow-lg">
                                        <img src="{{ leader.photo.url }}" alt="{{ leader.full_name }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                                    </div>
                                    {% else %}
                                    <div class="w-full h-full rounded-full flex items-center justify-center bg-gradient-to-br from-amma-gray-light to-amma-gray border-4 border-white shadow-lg">
                                        <svg class="w-24 h-24 text-white opacity-75" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Content -->
                            <div class="p-6 text-center">
                                <h3 class="text-2xl font-secondary font-semibold text-amma-black mb-2">{{ leader.full_name }}</h3>
                                <p class="text-amma-gold font-semibold mb-3">{{ leader.position }}</p>

                                {% if leader.department %}
                                <div class="mb-3">
                                    <span class="inline-block px-3 py-1 bg-amma-gold-light text-amma-black text-xs font-medium rounded-amma">
                                        {{ leader.department.name }}
                                    </span>
                                </div>
                                {% endif %}

                                {% if leader.bio %}
                                <p class="text-amma-gray text-sm leading-relaxed mb-4 line-clamp-3">{{ leader.bio }}</p>
                                {% endif %}

                                <!-- Social Links -->
                                {% if leader.linkedin_url or leader.twitter_url or leader.email %}
                                <div class="flex items-center justify-center gap-3 pt-4 border-t border-gray-100">
                                    {% if leader.email %}
                                    <a href="mailto:{{ leader.email }}" onclick="event.stopPropagation()" class="text-amma-gray hover:text-amma-gold transition-colors" title="Email">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                        </svg>
                                    </a>
                                    {% endif %}
                                    {% if leader.linkedin_url %}
                                    <a href="{{ leader.linkedin_url }}" onclick="event.stopPropagation()" target="_blank" rel="noopener noreferrer" class="text-amma-gray hover:text-amma-gold transition-colors" title="LinkedIn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                            <rect x="2" y="9" width="4" height="12"></rect>
                                            <circle cx="4" cy="4" r="2"></circle>
                                        </svg>
                                    </a>
                                    {% endif %}
                                    {% if leader.twitter_url %}
                                    <a href="{{ leader.twitter_url }}" onclick="event.stopPropagation()" target="_blank" rel="noopener noreferrer" class="text-amma-gray hover:text-amma-gold transition-colors" title="Twitter">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path>
                                        </svg>
                                    </a>
                                    {% endif %}
                                </div>
                                {% endif %}

                                <!-- Read More Indicator -->
                                {% if leader.bio %}
                                <div class="mt-4 flex items-center justify-center text-amma-gold text-sm font-semibold group-hover:text-amma-gold-dark transition-colors">
                                    <span>View Full Profile</span>
                                    <svg class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                                {% endif %}
                            </div>

                            <!-- Hidden data for modal -->
                            <div id="leader-data-{{ leader.pk }}" class="hidden"
                                 data-name="{{ leader.full_name }}"
                                 data-position="{{ leader.position }}"
                                 data-department="{{ leader.department.name|default:'' }}"
                                 data-bio="{{ leader.bio|default:'' }}"
                                 data-email="{{ leader.email|default:'' }}"
                                 data-phone="{{ leader.phone|default:'' }}"
                                 data-linkedin="{{ leader.linkedin_url|default:'' }}"
                                 data-twitter="{{ leader.twitter_url|default:'' }}"
                                 data-photo="{% if leader.photo and leader.photo.url %}{{ leader.photo.url }}{% endif %}"
                                 data-joined="{{ leader.joined_date|date:'F Y'|default:'' }}">
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Management Section -->
                {% if management %}
                <div class="mb-8">
                    <div class="relative mb-8">
                        <div class="absolute inset-0 flex items-center" aria-hidden="true">
                            <div class="w-full border-t-2 border-amma-gold"></div>
                        </div>
                        <div class="relative flex justify-center">
                            <span class="bg-amma-white px-6 py-2 text-3xl font-secondary font-bold text-amma-black">
                                Management Team
                            </span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {% for manager in management %}
                        <div class="bg-white rounded-amma shadow-amma-light hover:shadow-amma-dark transition-all duration-300 transform hover:-translate-y-1 overflow-hidden group cursor-pointer"
                             onclick="openBioModal('{{ manager.pk }}')">
                            <!-- Photo -->
                            <div class="relative overflow-hidden bg-gradient-to-br from-amma-gold-light to-amma-white">
                                <div class="w-full aspect-square flex items-center justify-center p-8">
                                    {% if manager.photo and manager.photo.url %}
                                    <div class="w-full h-full rounded-full overflow-hidden border-4 border-white shadow-lg">
                                        <img src="{{ manager.photo.url }}" alt="{{ manager.full_name }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                                    </div>
                                    {% else %}
                                    <div class="w-full h-full rounded-full flex items-center justify-center bg-gradient-to-br from-amma-gray-light to-amma-gray border-4 border-white shadow-lg">
                                        <svg class="w-24 h-24 text-white opacity-75" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Content -->
                            <div class="p-6 text-center">
                                <h3 class="text-2xl font-secondary font-semibold text-amma-black mb-2">{{ manager.full_name }}</h3>
                                <p class="text-amma-gold font-semibold mb-3">{{ manager.position }}</p>

                                {% if manager.department %}
                                <div class="mb-3">
                                    <span class="inline-block px-3 py-1 bg-amma-gold-light text-amma-black text-xs font-medium rounded-amma">
                                        {{ manager.department.name }}
                                    </span>
                                </div>
                                {% endif %}

                                {% if manager.bio %}
                                <p class="text-amma-gray text-sm leading-relaxed mb-4 line-clamp-3">{{ manager.bio }}</p>
                                {% endif %}

                                <!-- Social Links -->
                                {% if manager.linkedin_url or manager.twitter_url or manager.email %}
                                <div class="flex items-center justify-center gap-3 pt-4 border-t border-gray-100">
                                    {% if manager.email %}
                                    <a href="mailto:{{ manager.email }}" onclick="event.stopPropagation()" class="text-amma-gray hover:text-amma-gold transition-colors" title="Email">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                        </svg>
                                    </a>
                                    {% endif %}
                                    {% if manager.linkedin_url %}
                                    <a href="{{ manager.linkedin_url }}" onclick="event.stopPropagation()" target="_blank" rel="noopener noreferrer" class="text-amma-gray hover:text-amma-gold transition-colors" title="LinkedIn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                            <rect x="2" y="9" width="4" height="12"></rect>
                                            <circle cx="4" cy="4" r="2"></circle>
                                        </svg>
                                    </a>
                                    {% endif %}
                                    {% if manager.twitter_url %}
                                    <a href="{{ manager.twitter_url }}" onclick="event.stopPropagation()" target="_blank" rel="noopener noreferrer" class="text-amma-gray hover:text-amma-gold transition-colors" title="Twitter">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path>
                                        </svg>
                                    </a>
                                    {% endif %}
                                </div>
                                {% endif %}

                                <!-- Read More Indicator -->
                                {% if manager.bio %}
                                <div class="mt-4 flex items-center justify-center text-amma-gold text-sm font-semibold group-hover:text-amma-gold-dark transition-colors">
                                    <span>View Full Profile</span>
                                    <svg class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                                {% endif %}
                            </div>

                            <!-- Hidden data for modal -->
                            <div id="leader-data-{{ manager.pk }}" class="hidden"
                                 data-name="{{ manager.full_name }}"
                                 data-position="{{ manager.position }}"
                                 data-department="{{ manager.department.name|default:'' }}"
                                 data-bio="{{ manager.bio|default:'' }}"
                                 data-email="{{ manager.email|default:'' }}"
                                 data-phone="{{ manager.phone|default:'' }}"
                                 data-linkedin="{{ manager.linkedin_url|default:'' }}"
                                 data-twitter="{{ manager.twitter_url|default:'' }}"
                                 data-photo="{% if manager.photo and manager.photo.url %}{{ manager.photo.url }}{% endif %}"
                                 data-joined="{{ manager.joined_date|date:'F Y'|default:'' }}">
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Empty State -->
                {% if not leadership and not management %}
                <div class="text-center py-16">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-amma-gold-light rounded-full mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-amma-gold">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-secondary font-semibold text-amma-black mb-2">No Leadership Listed</h3>
                    <p class="text-amma-gray">Leadership information is currently being updated.</p>
                </div>
                {% endif %}
            </div>

            <!-- RIGHT: Sidebar (Desktop) -->
            <div class="order-1 lg:order-2">
                <div class="hidden lg:block lg:sticky lg:top-24 space-y-6">

                    <!-- Quick Stats -->
                    <div class="bg-white rounded-amma p-6 shadow-amma-light">
                        <h3 class="text-lg font-secondary font-semibold text-amma-black mb-4">Team Overview</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-amma-gray">Leadership</span>
                                <span class="text-lg font-bold text-amma-gold">{{ leadership|length }}</span>
                            </div>
                            <div class="border-b border-gray-200"></div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-amma-gray">Management</span>
                                <span class="text-lg font-bold text-amma-gold">{{ management|length }}</span>
                            </div>
                            <div class="border-b border-gray-200"></div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-amma-gray">Total</span>
                                <span class="text-lg font-bold text-amma-black">{{ leadership|length|add:management|length }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Departments Filter -->
                    {% if departments %}
                    <div class="bg-white rounded-amma p-6 shadow-amma-light">
                        <h3 class="text-lg font-secondary font-semibold text-amma-black mb-4 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-amma-gold">
                                <path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path>
                            </svg>
                            Departments
                        </h3>
                        <div class="space-y-2">
                            {% for department in departments %}
                            <div class="px-4 py-2 rounded-amma bg-amma-white border border-gray-200 text-sm text-amma-gray hover:bg-amma-gold-light transition-colors">
                                {{ department.name }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                </div>
            </div>

        </div>
    </div>
</section>

<!-- Bio Modal -->
<div id="bioModal" class="fixed inset-0 z-50 hidden">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" onclick="closeBioModal()"></div>

    <!-- Modal Content -->
    <div class="absolute inset-4 md:inset-10 lg:inset-20 bg-white rounded-amma shadow-amma-dark overflow-hidden flex flex-col">
        <!-- Modal Header -->
        <div class="bg-gradient-to-br from-amma-gray-light to-amma-gray p-6 flex-shrink-0">
            <div class="flex items-center justify-between">
                <h2 class="text-2xl font-secondary font-bold text-white">Profile</h2>
                <button onclick="closeBioModal()" class="text-white hover:text-amma-gold transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Modal Body -->
        <div class="flex-1 overflow-y-auto p-6 md:p-8">
            <div class="max-w-3xl mx-auto">
                <!-- Profile Header -->
                <div class="flex flex-col md:flex-row gap-6 mb-8">
                    <!-- Photo -->
                    <div class="flex-shrink-0">
                        <div id="modalPhoto" class="w-40 h-40 rounded-full overflow-hidden border-4 border-amma-gold shadow-lg bg-gradient-to-br from-amma-gray-light to-amma-gray flex items-center justify-center">
                            <svg class="w-20 h-20 text-white opacity-75" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    </div>

                    <!-- Info -->
                    <div class="flex-1">
                        <h3 id="modalName" class="text-3xl font-secondary font-bold text-amma-black mb-2"></h3>
                        <p id="modalPosition" class="text-xl text-amma-gold font-semibold mb-3"></p>
                        <div id="modalDepartment" class="mb-4"></div>
                        <div id="modalJoined" class="text-sm text-amma-gray"></div>
                    </div>
                </div>

                <!-- Biography -->
                <div id="modalBioSection" class="mb-8">
                    <h4 class="text-xl font-secondary font-semibold text-amma-black mb-3 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-amma-gold">
                            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        Biography
                    </h4>
                    <p id="modalBio" class="text-amma-gray leading-relaxed"></p>
                </div>

                <!-- Contact Information -->
                <div id="modalContactSection" class="mb-8">
                    <h4 class="text-xl font-secondary font-semibold text-amma-black mb-3 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-amma-gold">
                            <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                        </svg>
                        Contact Information
                    </h4>
                    <div class="space-y-2">
                        <div id="modalEmail"></div>
                        <div id="modalPhone"></div>
                    </div>
                </div>

                <!-- Social Media -->
                <div id="modalSocialSection" class="flex items-center gap-4">
                    <div id="modalLinkedIn"></div>
                    <div id="modalTwitter"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Mobile Filter Drawer -->
<div id="filterDrawer" class="fixed inset-0 z-50 lg:hidden hidden">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="toggleFilterDrawer()"></div>

    <!-- Drawer Content -->
    <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-amma shadow-amma-dark max-h-[80vh] overflow-y-auto">
        <div class="p-6">
            <!-- Header -->
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-secondary font-semibold text-amma-black">Departments</h3>
                <button onclick="toggleFilterDrawer()" class="text-amma-gray hover:text-amma-black">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <!-- Departments -->
            {% if departments %}
            <div class="space-y-2">
                {% for department in departments %}
                <div class="px-4 py-3 rounded-amma bg-amma-white border border-gray-200 text-sm text-amma-gray">
                    {{ department.name }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Scripts -->
<script>
function toggleFilterDrawer() {
    const drawer = document.getElementById('filterDrawer');
    drawer.classList.toggle('hidden');
}

function openBioModal(leaderId) {
    const modal = document.getElementById('bioModal');
    const data = document.getElementById('leader-data-' + leaderId);

    if (!data) return;

    // Get data attributes
    const name = data.dataset.name;
    const position = data.dataset.position;
    const department = data.dataset.department;
    const bio = data.dataset.bio;
    const email = data.dataset.email;
    const phone = data.dataset.phone;
    const linkedin = data.dataset.linkedin;
    const twitter = data.dataset.twitter;
    const photo = data.dataset.photo;
    const joined = data.dataset.joined;

    // Set modal content
    document.getElementById('modalName').textContent = name;
    document.getElementById('modalPosition').textContent = position;

    // Department
    if (department) {
        document.getElementById('modalDepartment').innerHTML = '<span class="inline-block px-4 py-2 bg-amma-gold-light text-amma-black text-sm font-medium rounded-amma">' + department + '</span>';
    } else {
        document.getElementById('modalDepartment').innerHTML = '';
    }

    // Joined date
    if (joined) {
        document.getElementById('modalJoined').innerHTML = '<strong>Joined:</strong> ' + joined;
    } else {
        document.getElementById('modalJoined').innerHTML = '';
    }

    // Photo
    const photoEl = document.getElementById('modalPhoto');
    if (photo) {
        photoEl.innerHTML = '<img src="' + photo + '" alt="' + name + '" class="w-full h-full object-cover">';
    } else {
        photoEl.innerHTML = '<svg class="w-20 h-20 text-white opacity-75" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>';
    }

    // Bio
    const bioSection = document.getElementById('modalBioSection');
    if (bio) {
        document.getElementById('modalBio').textContent = bio;
        bioSection.classList.remove('hidden');
    } else {
        bioSection.classList.add('hidden');
    }

    // Contact
    const contactSection = document.getElementById('modalContactSection');
    let hasContact = false;

    if (email) {
        document.getElementById('modalEmail').innerHTML = '<a href="mailto:' + email + '" class="flex items-center text-amma-gray hover:text-amma-gold transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>' + email + '</a>';
        hasContact = true;
    } else {
        document.getElementById('modalEmail').innerHTML = '';
    }

    if (phone) {
        document.getElementById('modalPhone').innerHTML = '<a href="tel:' + phone + '" class="flex items-center text-amma-gray hover:text-amma-gold transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>' + phone + '</a>';
        hasContact = true;
    } else {
        document.getElementById('modalPhone').innerHTML = '';
    }

    contactSection.style.display = hasContact ? 'block' : 'none';

    // Social
    const socialSection = document.getElementById('modalSocialSection');
    let hasSocial = false;

    if (linkedin) {
        document.getElementById('modalLinkedIn').innerHTML = '<a href="' + linkedin + '" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-4 py-2 bg-amma-gold hover:bg-amma-gold-dark text-amma-black font-semibold rounded-amma transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>LinkedIn</a>';
        hasSocial = true;
    } else {
        document.getElementById('modalLinkedIn').innerHTML = '';
    }

    if (twitter) {
        document.getElementById('modalTwitter').innerHTML = '<a href="' + twitter + '" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-4 py-2 bg-amma-gold hover:bg-amma-gold-dark text-amma-black font-semibold rounded-amma transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg>Twitter</a>';
        hasSocial = true;
    } else {
        document.getElementById('modalTwitter').innerHTML = '';
    }

    socialSection.style.display = hasSocial ? 'flex' : 'none';

    // Show modal
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeBioModal() {
    const modal = document.getElementById('bioModal');
    modal.classList.add('hidden');
    document.body.style.overflow = '';
}

// Close modal on escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeBioModal();
    }
});
</script>
{% endblock %}
